<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="assets/Quick-WhatsApp-Chat-favicon.webp" type="image/x-icon">
  <link rel="stylesheet" href="style.css">
  <title>Quick WhatsApp Chat</title>
</head>
<body>
  <h1>Quick WhatsApp Chat</h1>
  <form>
    <input 
      type="tel" 
      id="phoneNumber" 
      name="phoneNumber" 
      placeholder="Enter phone number"
      pattern="(0\d{9}|\+213\d{9})" 
      required>
    <div class="btns-container">
      <button type="button" id="webBtn">
        Open<img src="./assets/whatsapp-icon.svg" width="24" alt="Whatsapp icon">on the web
      </button>
      <button type="button" id="appBtn">
        Open<img src="./assets/whatsapp-icon.svg" width="24" alt="Whatsapp icon">app
      </button>
    </div>
  </form>

  <footer>
    <b><a href="https://red1code.github.io/red1dev/" target="_blank">Redouane</a></b> 
    Â© <span id="currentYear"></span> | Check on 
    <b><a href="https://github.com/red1code/Quick-WhatsApp-Chat" target="_blank">Github</a></b>
  </footer>

  
  <script>
    const currentYear = document.getElementById('currentYear')
      .textContent = new Date().getFullYear();

    const form = document.querySelector('form');
    const webBtn = document.getElementById('webBtn');
    const appBtn = document.getElementById('appBtn');
    const phoneNumber = document.getElementById('phoneNumber');

    const getPhone = () => phoneNumber.value.startsWith('0') 
          ? '+213' + phoneNumber.value.slice(1)
          : phoneNumber.value;

    webBtn.onclick = (evt) => {
      evt.preventDefault();
      if (form.checkValidity()) {
        const url = `https://web.whatsapp.com/send?phone=${getPhone()}`;
        window.open(url, '_blank');
      } else {
        window.alert('Phone number invalid!')
      }
    }

    appBtn.onclick = (evt) => {
      evt.preventDefault();
      if (form.checkValidity()) {
        const url = `https://wa.me/${getPhone()}`;
        window.open(url, '_blank');
      } else {
        window.alert('Phone number invalid!')
      }
    }
  </script>
</body>
</html>
